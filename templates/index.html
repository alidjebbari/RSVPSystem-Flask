<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ event.title }} RSVP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: #f8fafc;
            color: #0f172a;
        }
        body {
            margin: 0;
            padding: 2rem;
            display: flex;
            justify-content: center;
        }
        .card {
            background: white;
            border-radius: 18px;
            box-shadow: 0 35px 120px rgba(15, 23, 42, 0.15);
            padding: 2.5rem;
            max-width: 960px;
            width: 100%;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
        }
        h1 {
            margin: 0;
        }
        .event-details {
            line-height: 1.6;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        label {
            font-weight: 600;
            font-size: 0.9rem;
        }
        input, select, textarea {
            width: 100%;
            border: 1px solid #cbd5f5;
            border-radius: 10px;
            padding: 0.8rem 1rem;
            font-size: 1rem;
        }
        button {
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            font-weight: 600;
            padding: 0.9rem 1.2rem;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 15px 30px rgba(99, 102, 241, 0.3);
        }
        .error {
            color: #dc2626;
            font-size: 0.85rem;
        }
        .actions {
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .actions a {
            color: #6366f1;
            text-decoration: none;
        }
        @media (max-width: 640px) {
            body { padding: 1rem; }
            .card { padding: 1.25rem; }
        }
    </style>
</head>
<body>
    <div class="card">
        <section>
            <p class="eyebrow">You're invited</p>
            <h1>{{ event.title }}</h1>
            <div class="event-details">
                <p><strong>When:</strong> {{ event.date }} &middot; {{ event.time }}</p>
                <p><strong>Where:</strong> {{ event.location }}</p>
                <p>{{ event.description }}</p>
            </div>
            <div class="actions">
                <a href="{{ url_for('list_rsvps') }}">View responses</a>
            </div>
        </section>
        <section>
            <form action="{{ url_for('submit') }}" method="POST" novalidate>
                <div>
                    <label for="name">Full name</label>
                    <input id="name" name="name" value="{{ (form_data.name if form_data else '') | default('') }}" required>
                    {% if errors and errors.get('name') %}
                        <div class="error">{{ errors['name'] }}</div>
                    {% endif %}
                </div>
                <div>
                    <label for="email">Email</label>
                    <input id="email" name="email" type="email" value="{{ (form_data.email if form_data else '') | default('') }}" required>
                    {% if errors and errors.get('email') %}
                        <div class="error">{{ errors['email'] }}</div>
                    {% endif %}
                </div>
                <div>
                    <label for="attending">Can you make it?</label>
                    <select id="attending" name="attending" required>
                        {% set attending_choice = (form_data.attending if form_data else '') %}
                        <option value="" disabled selected>Select an option</option>
                        <option value="yes" {% if attending_choice == 'yes' %}selected{% endif %}>Count me in!</option>
                        <option value="no" {% if attending_choice == 'no' %}selected{% endif %}>Sadly no</option>
                    </select>
                    {% if errors and errors.get('attending') %}
                        <div class="error">{{ errors['attending'] }}</div>
                    {% endif %}
                </div>
                <div>
                    <label for="guests">Guests (+1s)</label>
                    <input id="guests" name="guests" type="number" min="0" max="5" value="{{ (form_data.guests if form_data else '0') | default('0') }}">
                    {% if errors and errors.get('guests') %}
                        <div class="error">{{ errors['guests'] }}</div>
                    {% endif %}
                </div>
                <div>
                    <label for="note">Anything we should know?</label>
                    <textarea id="note" name="note" rows="3" placeholder="Dietary needs, demo you'd like to share, etc.">{{ (form_data.note if form_data else '') | default('') }}</textarea>
                </div>
                <button type="submit">Submit RSVP</button>
            </form>
        </section>
    </div>
</body>
</html>
